"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[389],{5197:function(t,e,i){i.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("h2",{staticStyle:{"margin-bottom":"20px"}},[t._v("评论 "+t._s(t.commentCount))]),e("div",{staticStyle:{"margin-bottom":"20px"}},[e("el-input",{attrs:{type:"textarea",placeholder:"请输入评论内容"},model:{value:t.commentContent,callback:function(e){t.commentContent=e},expression:"commentContent"}}),e("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.addComment}},[t._v("评 论")])],1)],1),e("div",t._l(t.commentList,(function(i){return e("div",{key:i.id,staticStyle:{display:"flex","grid-gap":"20px","margin-bottom":"20px"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:i.avatar,alt:""}}),e("div",{staticStyle:{flex:"1"}},[e("div",{staticStyle:{"margin-bottom":"10px"}},[e("div",{staticStyle:{color:"#666","margin-bottom":"10px"}},[t._v(t._s(i.userName))]),e("div",{staticStyle:{color:"#444","margin-bottom":"10px"}},[t._v(t._s(i.content))]),e("div",{staticStyle:{color:"#888","font-size":"13px","margin-bottom":"10px"}},[e("span",{staticStyle:{"margin-right":"20px"}},[t._v(t._s(i.time))]),e("span",{class:{"comment-active":i.showReplyInput},staticStyle:{cursor:"pointer"},on:{click:function(e){return t.handleShowshowReplyInput(i)}}},[e("i",{staticClass:"el-icon-s-comment"}),t._v("评论")]),i.userId===t.user.id?e("span",{staticStyle:{"margin-left":"20px",cursor:"pointer"},on:{click:function(e){return t.del(i.id)}}},[e("i",{staticClass:"el-icon-delete"}),t._v("删除")]):t._e()])]),i.showReplyInput?e("div",[e("el-input",{attrs:{type:"textarea",placeholder:"请输入回复内容"},model:{value:i.replyContent,callback:function(e){t.$set(i,"replyContent",e)},expression:"item.replyContent"}}),e("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addReplay(i)}}},[t._v("回 复")])],1)],1):t._e(),t._l(i.children,(function(s){return e("div",{key:i.id,staticStyle:{display:"flex","grid-gap":"20px","margin-bottom":"20px"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:s.avatar,alt:""}}),e("div",{staticStyle:{flex:"1"}},[e("div",{staticStyle:{color:"#666","margin-bottom":"10px"}},[t._v(t._s(s.userName)+" "),s.replyUser!==i.userName?e("span",{staticStyle:{color:"#333"}},[t._v("回复 "+t._s(s.replyUser))]):t._e()]),e("div",{staticStyle:{color:"#444","margin-bottom":"10px"}},[t._v(t._s(s.content))]),e("div",{staticStyle:{color:"#888","font-size":"13px","margin-bottom":"10px"}},[e("span",{staticStyle:{"margin-right":"20px"}},[t._v(t._s(s.time))]),e("span",{class:{"comment-active":s.showReplyInput},staticStyle:{cursor:"pointer"},on:{click:function(e){return t.handleShowshowReplyInput(s)}}},[e("i",{staticClass:"el-icon-s-comment"}),t._v("评论")]),s.userId===t.user.id?e("span",{staticStyle:{"margin-left":"20px",cursor:"pointer"},on:{click:function(e){return t.del(s.id)}}},[e("i",{staticClass:"el-icon-delete"}),t._v("删除")]):t._e()]),s.showReplyInput?e("div",[e("el-input",{attrs:{type:"textarea",placeholder:"请输入回复内容"},model:{value:s.replyContent,callback:function(e){t.$set(s,"replyContent",e)},expression:"sub.replyContent"}}),e("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addReplay(s)}}},[t._v("回 复")])],1)],1):t._e()])])}))],2)])})),0)])},o=[],l={name:"CommentComponent",props:{fid:null,module:null},data(){return{commentCount:0,commentContent:"",commentList:[],user:JSON.parse(localStorage.getItem("xm-user")||"{}")}},created(){this.loadComment()},methods:{del(t){this.$confirm("您确定删除吗？","确认删除",{type:"warning"}).then((e=>{this.$request.delete("/comment/delete/"+t).then((t=>{"200"===t.code?this.loadComment():this.$message.error(t.msg)}))})).catch((()=>{}))},loadComment(){this.$request.get("/comment/selectForUser",{params:{fid:this.fid,module:this.module}}).then((t=>{this.commentList=t.data||[]})),this.$request.get("/comment/selectCount",{params:{fid:this.fid,module:this.module}}).then((t=>{this.commentCount=t.data||0}))},handleShowshowReplyInput(t){this.$set(t,"showReplyInput",!t.showReplyInput)},addReplay(t){this.$request.post("/comment/add",{content:t.replyContent,rootId:t.rootId,fid:this.fid,module:this.module,pid:t.id}).then((e=>{"200"===e.code&&(t.replyContent="",this.loadComment())}))},addComment(){""!==this.commentContent?"666"!==this.user.username?this.$request.post("/comment/add",{content:this.commentContent,fid:this.fid,module:this.module}).then((t=>{"200"===t.code&&(this.commentContent="",this.loadComment())})):this.$message.error("访客不能评论，请先登录哦"):this.$message.error("评论为空")}}},a=l,n=i(3736),r=(0,n.Z)(a,s,o,!1,null,"b1d73914",null),c=r.exports},9985:function(t,e,i){i.d(e,{Z:function(){return c}});var s=function(){var t=this;t._self._c;return t._m(0)},o=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"font-size":"16px",padding:"20px 0","text-align":"center","line-height":"30px",color:"#666"}},[e("div",[t._v("京ICP备666888999 @版权所有 迟意")]),e("div",[t._v("公司地址 西北大学长安校区 手机号 18392945246")])])}],l={name:"Footer"},a=l,n=i(3736),r=(0,n.Z)(a,s,o,!1,null,"566e200a",null),c=r.exports},389:function(t,e,i){i.r(e),i.d(e,{default:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content main"},[e("div",{staticStyle:{display:"flex","grid-gap":"10px"}},[e("div",{staticStyle:{flex:"1",width:"0"}},[e("div",{staticClass:"card",staticStyle:{padding:"30px","margin-bottom":"10px"}},[e("div",{staticStyle:{"font-weight":"bold","font-size":"24px","margin-bottom":"20px"}},[t._v(t._s(t.blog.title))]),e("div",{staticStyle:{color:"#666","margin-bottom":"10px"}},[e("span",{staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"el-icon-user"}),t._v(" "+t._s(t.blog.userName))]),e("span",{staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"el-icon-date"}),t._v(" "+t._s(t.blog.date))]),e("span",{staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"el-icon-eye"}),t._v(" "+t._s(t.blog.readCount))]),e("span",t._l(t.tagsArr,(function(i){return e("el-tag",{key:i,staticStyle:{"margin-right":"5px"},attrs:{type:"primary"}},[t._v(t._s(i))])})),1)]),e("mavon-editor",{ref:"mavonEditor",staticClass:"md",attrs:{value:t.blog.content,subfield:!1,defaultOpen:"preview",toolbarsFlag:!1,editable:!1,scrollStyle:!0,ishljs:!0}})],1),e("button",{staticClass:"rocket-button",on:{click:t.scrollToTop}}),e("div",{staticClass:"card",staticStyle:{"text-align":"center","font-size":"20px",color:"#666","margin-bottom":"10px"}},[e("span",{class:{active:t.blog.userLike},staticStyle:{"margin-right":"20px",cursor:"pointer"},on:{click:t.setLikes}},[e("i",{staticClass:"el-icon-like"}),t._v(" "+t._s(t.blog.likesCount))]),e("span",{class:{active:t.blog.userCollect},staticStyle:{cursor:"pointer"},on:{click:t.setCollect}},[e("i",{staticClass:"el-icon-star-off"}),t._v(" "+t._s(t.blog.collectCount))])]),e("comment",{attrs:{fid:t.blogId,module:"博客"}})],1),e("div",{staticStyle:{width:"260px"}},[e("div",{staticClass:"card",staticStyle:{"margin-bottom":"10px"}},[e("div",{staticStyle:{display:"flex","align-items":"center","grid-gap":"10px","margin-bottom":"10px"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:t.blog.user?.avatar,alt:""}}),e("div",{staticStyle:{flex:"1"}},[e("div",{staticStyle:{"font-weight":"bold","margin-bottom":"5px"}},[t._v(t._s(t.blog.user?.name))]),e("div",{staticClass:"line2",staticStyle:{color:"#666","font-size":"13px"}},[t._v(t._s(t.blog.user?.info))])])]),e("div",{staticStyle:{display:"flex"}},[e("div",{staticStyle:{flex:"1","text-align":"center"}},[e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("文章")]),e("div",{staticStyle:{color:"#888"}},[t._v(t._s(t.blog.user?.blogCount))])]),e("div",{staticStyle:{flex:"1","text-align":"center"}},[e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("点赞")]),e("div",{staticStyle:{color:"#888"}},[t._v(t._s(t.blog.user?.likesCount))])]),e("div",{staticStyle:{flex:"1","text-align":"center"}},[e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("收藏")]),e("div",{staticStyle:{color:"#888"}},[t._v(t._s(t.blog.user?.collectCount))])])])]),e("div",{staticClass:"card",staticStyle:{"margin-bottom":"10px"}},[e("div",{staticStyle:{"font-weight":"bold","font-size":"20px","padding-bottom":"10px","border-bottom":"1px solid #ddd","margin-bottom":"10px"}},[t._v("相关推荐")]),e("div",t._l(t.recommendList,(function(i){return e("div",{key:i.id,staticStyle:{"margin-bottom":"15px"}},[e("a",{attrs:{href:"/front/blogDetail?blogId="+i.id,target:"_blank"}},[e("div",{staticClass:"recommend-title line2"},[t._v(t._s(i.title))])]),e("div",{staticStyle:{color:"#888"}},[e("span",[t._v("阅读")]),t._v(" "),e("span",[t._v(t._s(i.readCount))]),e("span",{staticStyle:{"margin-left":"10px"}},[t._v("点赞")]),t._v(" "),e("span",[t._v(t._s(i.likesCount))])])])})),0)]),e("div",{staticClass:"card"},[e("div",{staticStyle:{display:"flex","grid-gap":"10px","align-items":"center"}},[e("div",{staticStyle:{flex:"1","line-height":"20px"}},[e("font",{staticStyle:{color:"cadetblue"}},[t._v("西北大学计算机学长,需要计算机考研资料或者一对一辅导请添加哦！😊😊😊")])],1),e("img",{staticStyle:{width:"60px",height:"60px","border-radius":"5px"},attrs:{src:i(6490),alt:""}})])])])]),e("Footer")],1)},o=[],l=i(9985),a=i(5197),n={name:"BlogDetail",components:{Comment:a.Z,Footer:l.Z},data(){return{blogId:this.$route.query.blogId,blog:{},tagsArr:[],recommendList:[]}},created(){this.load(),this.$request.put("/blog/updateReadCount/"+this.blogId)},methods:{scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})},setLikes(){this.$request.post("/likes/set",{fid:this.blogId,module:"博客"}).then((t=>{"200"===t.code&&this.load()}))},setCollect(){this.$request.post("/collect/set",{fid:this.blogId,module:"博客"}).then((t=>{"200"===t.code&&this.load()}))},load(){this.$request.get("/blog/selectById/"+this.blogId).then((t=>{this.blog=t.data||{},this.tagsArr=JSON.parse(this.blog.tags||"[]")})),this.$request.get("/blog/selectRecommend/"+this.blogId).then((t=>{this.recommendList=t.data||[]}))}}},r=n,c=i(3736),d=(0,c.Z)(r,s,o,!1,null,null,null),m=d.exports},6490:function(t,e,i){t.exports=i.p+"img/广告.696ab061.png"}}]);
//# sourceMappingURL=389.5af8d3f3.js.map